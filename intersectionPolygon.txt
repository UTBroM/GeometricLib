/** Author : Paul TREHIOU & Victor SENE
 *  Date : January 2015
 **/

LEXICON
========
poly1, poly2: the polygons which we want to know if there are intersections between them
outpoly : polygon wich is the result of the function

ALGORITHM
=========
Data:   Polygon: poly1
        Polygon: poly2
Return: Polygon: outpoly


function intersectionPolygons(poly1 : Polygon, poly2 : Polygon) : Polygon
Begin
	
	inIntersect = 0
	for i from 1 to size(poly1) do
		for j from 1 to size(poly2) do
			intersect = segmentsCross(value(head(poly1)),value(next(head(poly1))),value(head(poly)),value(next(head(poly2))))
			intersectPoint = value(intersect)
			if intersect != NULL then
				newpoly = addTail(newpoly, intersectPoint)

				if inIntersect = 1 then 
					inIntersect = 0 
				else
					inIntersect =1
				endif
			else
				if inIntersect = 1 then
					if containsPoint(poly2, head(poly2)) then
						newpoly = addTail(newpoly, head(poly2))
					endif
					if containsPoint(poly1, head(poly2)) then
						newpoly = addTail(newpoly, head(poly2))
					endif
				endif
			endif
			head(poly2) = next(head(poly2))
		done
		head(poly1) = next(head(poly1))
	done

	intersectionPolygons <- newpoly
End